---
title: "Atos Project"
output: rmdformats::readthedown

---

# Performance and Feature Importance Report

## An overview of this report
```{r include=FALSE}
library(haven)
library(tidyverse)
library(tidymodels)
library(stacks)
library(vip)
library(pdp)
library(sparkline)
library(plotly)
```





## Past month heroin use {.tabset}

### HU_1YR

#### Performance
```{r, echo=FALSE}

load("~/Statistical-Supplementary-Materials/Atos/HU_1YR_vips.RData")
 ens_mod_pred%>% accuracy(truth = HU_1YR, .pred_class)%>%bind_rows(ens_mod_pred%>% f_meas(truth = HU_1YR, .pred_class))%>%knitr::kable()

```


#### Feature Importance
```{r, echo=FALSE}
p=ggplot(vips,aes(x=reorder(Variable, importance),y=importance))+
  scale_fill_gradient(low = "green", high = "red") + 
  geom_bar(position="dodge", stat="identity", aes(fill = importance))+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
  xlab("Predictor")+ ylab("Importance Rank")

ggplotly(p)
rm(list = ls())
```

### HU_5YR

#### Performance
```{r, echo=FALSE}
load("~/Statistical-Supplementary-Materials/Atos/HU_5YR_vips.RData")
ens_mod_pred%>% accuracy(truth = HU_5YR, .pred_class)%>%bind_rows(ens_mod_pred%>% f_meas(truth = HU_5YR, .pred_class))%>%knitr::kable()
```


#### Feature Importance


```{r, echo=FALSE}
p=ggplot(vips,aes(x=reorder(Variable, importance),y=importance))+
  scale_fill_gradient(low = "green", high = "red") + 
  geom_bar(position="dodge", stat="identity", aes(fill = importance))+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
  xlab("Predictor")+ ylab("Importance Rank")

ggplotly(p)
rm(list = ls())
```


### HU_10YR

#### Performance

```{r, echo=FALSE}
load("~/Statistical-Supplementary-Materials/Atos/HU_10YR_vips.RData")
ens_mod_pred%>% accuracy(truth = HU_10YR, .pred_class)%>%bind_rows(ens_mod_pred%>% f_meas(truth = HU_10YR, .pred_class))%>%knitr::kable()
```


#### Feature Importance



```{r, echo=FALSE}
p=ggplot(vips,aes(x=reorder(Variable, importance),y=importance))+
  scale_fill_gradient(low = "green", high = "red") + 
  geom_bar(position="dodge", stat="identity", aes(fill = importance))+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
  xlab("Predictor")+ ylab("Importance Rank")

ggplotly(p)
rm(list = ls())
```

## Remission {.tabset}

### STA_1YR

#### Performance



#### Feature Importance



### STA_5YR

#### Performance



#### Feature Importance



### MTA_5YR

#### Performance



#### Feature Importance



### STA_10YR

#### Performance


#### Feature Importance



### MTA_10YR

#### Performance



#### Feature Importance



### LTA_10yr

#### Performance



#### Feature Importance





## OD {.tabset}


### DEATH_1YR

#### Performance



#### Feature Importance



### DEATH_5YR

#### Performance



#### Feature Importance



### DEATH_10YR

#### Performance



#### Feature Importance




## Mortality {.tabset}


### DEATH_1YR

#### Performance



#### Feature Importance



### DEATH_5YR

#### Performance



#### Feature Importance



### DEATH_10YR

#### Performance



#### Feature Importance



### DEATH_15YR

#### Performance



#### Feature Importance

